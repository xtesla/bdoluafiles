local PaGlobal_Production_Tutorial_Main = {
  _ui_Key1 = {
    _button_Q = nil,
    _button_W = nil,
    _button_E = nil,
    _button_R = nil,
    _button_A = nil,
    _button_S = nil,
    _button_D = nil,
    _button_F = nil,
    _button_C = nil,
    _button_Tab = nil,
    _button_Shift = nil,
    _button_Space = nil,
    _m0 = nil,
    _m1 = nil,
    _mBody = nil,
    _buttonLock = nil,
    _m0_Lock = nil,
    _m1_Lock = nil
  },
  _ui_Key2 = {
    _button_Q = nil,
    _button_W = nil,
    _button_E = nil,
    _button_R = nil,
    _button_A = nil,
    _button_S = nil,
    _button_D = nil,
    _button_F = nil,
    _button_C = nil,
    _button_Tab = nil,
    _button_Shift = nil,
    _button_Space = nil,
    _m0 = nil,
    _m1 = nil,
    _mBody = nil,
    _buttonLock = nil,
    _m0_Lock = nil,
    _m1_Lock = nil
  },
  _uvSet = {
    _button_Q = {
      on = {
        1,
        1,
        63,
        65
      },
      click = {
        63,
        0,
        126,
        65
      },
      off = {
        127,
        1,
        189,
        65
      }
    },
    _button_W = {
      on = {
        1,
        1,
        63,
        65
      },
      click = {
        63,
        0,
        126,
        65
      },
      off = {
        127,
        1,
        189,
        65
      }
    },
    _button_E = {
      on = {
        1,
        1,
        63,
        65
      },
      click = {
        63,
        0,
        126,
        65
      },
      off = {
        127,
        1,
        189,
        65
      }
    },
    _button_R = {
      on = {
        1,
        1,
        63,
        65
      },
      click = {
        63,
        0,
        126,
        65
      },
      off = {
        127,
        1,
        189,
        65
      }
    },
    _button_A = {
      on = {
        1,
        1,
        63,
        65
      },
      click = {
        63,
        0,
        126,
        65
      },
      off = {
        127,
        1,
        189,
        65
      }
    },
    _button_S = {
      on = {
        1,
        1,
        63,
        65
      },
      click = {
        63,
        0,
        126,
        65
      },
      off = {
        127,
        1,
        189,
        65
      }
    },
    _button_D = {
      on = {
        1,
        1,
        63,
        65
      },
      click = {
        63,
        0,
        126,
        65
      },
      off = {
        127,
        1,
        189,
        65
      }
    },
    _button_F = {
      on = {
        1,
        1,
        63,
        65
      },
      click = {
        63,
        0,
        126,
        65
      },
      off = {
        127,
        1,
        189,
        65
      }
    },
    _button_C = {
      on = {
        1,
        1,
        63,
        65
      },
      click = {
        63,
        0,
        126,
        65
      },
      off = {
        127,
        1,
        189,
        65
      }
    },
    _button_Tab = {
      on = {
        1,
        1,
        63,
        65
      },
      click = {
        63,
        0,
        126,
        65
      },
      off = {
        127,
        1,
        189,
        65
      }
    },
    _button_Shift = {
      on = {
        1,
        1,
        63,
        65
      },
      click = {
        63,
        0,
        126,
        65
      },
      off = {
        127,
        1,
        189,
        65
      }
    },
    _button_Space = {
      on = {
        1,
        1,
        63,
        65
      },
      click = {
        63,
        0,
        126,
        65
      },
      off = {
        127,
        1,
        189,
        65
      }
    },
    _m0 = {
      on = {
        1,
        66,
        74,
        143
      },
      click = {
        75,
        65,
        148,
        143
      },
      off = {
        149,
        66,
        222,
        143
      }
    },
    _m1 = {
      on = {
        1,
        144,
        74,
        221
      },
      click = {
        75,
        143,
        148,
        221
      },
      off = {
        149,
        144,
        222,
        221
      }
    }
  },
  _keyIsUpdate = {
    _button_Q = "off",
    _button_W = "off",
    _button_E = "off",
    _button_R = "off",
    _button_A = "off",
    _button_S = "off",
    _button_D = "off",
    _button_F = "off",
    _button_C = "off",
    _button_Tab = "off",
    _button_Shift = "off",
    _button_Space = "off",
    _m0 = "off",
    _m1 = "off"
  },
  _keyIsShow = {
    _button_Q = "off",
    _button_W = "off",
    _button_E = "off",
    _button_R = "off",
    _button_A = "off",
    _button_S = "off",
    _button_D = "off",
    _button_F = "off",
    _button_C = "off",
    _button_Tab = "off",
    _button_Shift = "off",
    _button_Space = "off",
    _m0 = "off",
    _m1 = "off"
  },
  _keyToVirtualKey = {
    _button_Q = 12,
    _button_W = 0,
    _button_E = 13,
    _button_R = 8,
    _button_A = 2,
    _button_S = 1,
    _button_D = 3,
    _button_F = 14,
    _button_C = 17,
    _button_Tab = 10,
    _button_Shift = 6,
    _button_Space = 7,
    _m0 = 4,
    _m1 = 5
  },
  _ui_Quest = {_quest_main = nil, _quest_desc = nil},
  _ui_SkillGuide = {
    _Step1 = nil,
    _Step1_MoveForward = nil,
    _Step1_Move = nil,
    _Step1_Sprint = nil,
    _Step1_Interaction = nil,
    _Step2 = nil,
    _Step2_1 = nil,
    _Step2_2 = nil,
    _Step2_3 = nil,
    _Step3 = nil,
    _Step3_1 = nil,
    _Step3_2 = nil,
    _Step3_3 = nil
  },
  _renderMode = nil,
  _currentQuestNo = nil,
  _currentTutorialStep = 0,
  _isChangeTutorialStep = false,
  _skillGuideIndex = 0,
  _delaySkillGuideCheckTime = 0,
  _accDeltaTime = 0,
  _delayNextSkillGuideCheckTime = 0,
  _accNextDeltaTime = 0,
  _toggleEffectTest = 0
}
function PaGlobal_Production_Tutorial_Main:initialize()
  if nil == Panel_Widget_NewTutorial_Key or nil == Panel_Widget_NewTutorial_Quest or nil == Panel_Widget_NewTutorial_SkillGuide then
    return
  end
  self._renderMode = RenderModeWrapper.new(100, {
    Defines.RenderMode.eRenderMode_Production
  }, false)
  self._renderMode:setClosefunctor(self._renderMode, PaGlobal_Production_Tutorial_Main_Close)
  self._ui_Key1._button_Q = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_Q")
  self._ui_Key1._button_W = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_W")
  self._ui_Key1._button_E = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_E")
  self._ui_Key1._button_R = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_R")
  self._ui_Key1._button_A = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_A")
  self._ui_Key1._button_S = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_S")
  self._ui_Key1._button_D = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_D")
  self._ui_Key1._button_F = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_F")
  self._ui_Key1._button_C = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_C")
  self._ui_Key1._button_Tab = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_Tab")
  self._ui_Key1._button_Shift = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_Shift")
  self._ui_Key1._button_Space = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_Space")
  self._ui_Key1._m0 = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_M0")
  self._ui_Key1._m1 = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_M1")
  self._ui_Key1._mBody = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Mouse_Body")
  self._ui_Key1._buttonLock = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Button_Lock")
  self._ui_Key1._m0_Lock = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_M0_Lock")
  self._ui_Key1._m1_Lock = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_M1_Lock")
  self._ui_Key2._button_Q = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_Q_2")
  self._ui_Key2._button_W = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_W_2")
  self._ui_Key2._button_E = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_E_2")
  self._ui_Key2._button_R = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_R_2")
  self._ui_Key2._button_A = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_A_2")
  self._ui_Key2._button_S = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_S_2")
  self._ui_Key2._button_D = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_D_2")
  self._ui_Key2._button_F = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_F_2")
  self._ui_Key2._button_C = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_C_2")
  self._ui_Key2._button_Tab = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_Tab_2")
  self._ui_Key2._button_Shift = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_Shift_2")
  self._ui_Key2._button_Space = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Btn_Space_2")
  self._ui_Key2._m0 = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_M0_2")
  self._ui_Key2._m1 = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_M1_2")
  self._ui_Key2._mBody = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Mouse_Body_2")
  self._ui_Key2._buttonLock = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_Button_Lock_2")
  self._ui_Key2._m0_Lock = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_M0_Lock_2")
  self._ui_Key2._m1_Lock = UI.getChildControl(Panel_Widget_NewTutorial_Key, "StaticText_M1_Lock_2")
  self._ui_Quest._quest_main = UI.getChildControl(Panel_Widget_NewTutorial_Quest, "Static_MainBG")
  self._ui_Quest._quest_desc = UI.getChildControl(self._ui_Quest._quest_main, "MultilineText_Desc")
  self._ui_Quest._quest_desc:SetText("")
  self._ui_SkillGuide._Step1 = UI.getChildControl(Panel_Widget_NewTutorial_SkillGuide, "Static_Step1_Basic")
  self._ui_SkillGuide._Step1_MoveForward = UI.getChildControl(self._ui_SkillGuide._Step1, "Static_MainBG_MoveForward")
  self._ui_SkillGuide._Step1_Move = UI.getChildControl(self._ui_SkillGuide._Step1, "Static_MainBG_Move")
  self._ui_SkillGuide._Step1_Sprint = UI.getChildControl(self._ui_SkillGuide._Step1, "Static_MainBG_Sprint")
  self._ui_SkillGuide._Step1_Interaction = UI.getChildControl(self._ui_SkillGuide._Step1, "Static_MainBG_Interaction")
  self._ui_SkillGuide._Step2 = UI.getChildControl(Panel_Widget_NewTutorial_SkillGuide, "Static_Step2_BasicBattle")
  self._ui_SkillGuide._Step2_1 = UI.getChildControl(self._ui_SkillGuide._Step2, "Static_MainBG_1")
  self._ui_SkillGuide._Step2_2 = UI.getChildControl(self._ui_SkillGuide._Step2, "Static_MainBG_2")
  self._ui_SkillGuide._Step2_3 = UI.getChildControl(self._ui_SkillGuide._Step2, "Static_MainBG_3")
  self._ui_SkillGuide._Step3 = UI.getChildControl(Panel_Widget_NewTutorial_SkillGuide, "Static_Step3_BasicBattle")
  self._ui_SkillGuide._Step3_1 = UI.getChildControl(self._ui_SkillGuide._Step3, "Static_MainBG_1")
  self._ui_SkillGuide._Step3_2 = UI.getChildControl(self._ui_SkillGuide._Step3, "Static_MainBG_2")
  self._ui_SkillGuide._Step3_3 = UI.getChildControl(self._ui_SkillGuide._Step3, "Static_MainBG_3")
  self:registEventHandler()
  PaGlobal_Production_Tutorial_Main_ReSizePanel()
  Panel_Widget_NewTutorial_Key:SetShow(false)
  Panel_Widget_NewTutorial_Quest:SetShow(false)
  Panel_Widget_NewTutorial_SkillGuide:SetShow(false)
  if true == ToClient_isProductionMode() then
    PaGlobal_Production_Tutorial_Main_Open()
    local currentQuestNo = ToClient_getCurrentProductionQuestNo()
    self._currentQuestGroup = currentQuestNo._group
    self._currentQuestNo = currentQuestNo._quest
  else
    PaGlobal_Production_Tutorial_Main_Close()
  end
  self:updateUiOnOff()
end
function PaGlobal_Production_Tutorial_Main:registEventHandler()
  if nil == Panel_Widget_NewTutorial_Key then
    return
  end
  registerEvent("FromClient_enterProductionMode", "FromClient_enterProductionMode")
  registerEvent("FromClient_playReadyProduction", "FromClient_playReadyProduction")
  registerEvent("FromClient_acceptProductionQuest", "FromClient_acceptProductionQuest")
  registerEvent("FromClient_startProductionNotMovie", "FromClient_startProductionNotMovie")
  registerEvent("FromClient_endProductionNotMovie", "FromClient_endProductionNotMovie")
  registerEvent("FromClient_endProductionNotMovieHaveGroupCam", "FromClient_endProductionNotMovieHaveGroupCam")
  registerEvent("FromClient_luaLoadCompleteLateUdpate", "FromClient_luaLoadCompleteLateUpdate")
  registerEvent("onScreenResize", "PaGlobal_Production_Tutorial_Main_ReSizePanel")
  Panel_Widget_NewTutorial_Key:RegisterShowEventFunc(true, "PaGlobalFunc_NewTutorial_Key_ShowAni()")
  Panel_Widget_NewTutorial_Key:RegisterShowEventFunc(false, "PaGlobalFunc_NewTutorial_Key_HideAni()")
  Panel_Widget_NewTutorial_Quest:RegisterShowEventFunc(true, "PaGlobalFunc_NewTutorial_Quest_ShowAni()")
  Panel_Widget_NewTutorial_Quest:RegisterShowEventFunc(false, "PaGlobalFunc_NewTutorial_Quest_HideAni()")
  Panel_Widget_NewTutorial_SkillGuide:RegisterShowEventFunc(true, "PaGlobalFunc_NewTutorial_SkillGuide_ShowAni()")
  Panel_Widget_NewTutorial_SkillGuide:RegisterShowEventFunc(false, "PaGlobalFunc_NewTutorial_SkillGuide_HideAni()")
end
local _alphaAnimTime = 0.7
local _textAnimationStartTime = _alphaAnimTime + 0.2
local _textdeltaTime = 0
local _saveCurrentText = ""
local _isStartTextAni = false
local _drawCurrentIndex = 1
local _lateUpdateQuestDesc = false
function setTestTime(time)
  _alphaAnimTime = time
end
function FromClient_startProductionNotMovie()
  _lateUpdateQuestDesc = true
end
function FromClient_endProductionNotMovie()
  _lateUpdateQuestDesc = true
end
function FromClient_endProductionNotMovieHaveGroupCam()
  PaGlobal_Production_Tutorial_Main_Close()
end
function PaGlobalFunc_NewTutorial_Quest_ShowAni()
  Panel_Widget_NewTutorial_Quest:ResetVertexAni()
  local alphaAni = Panel_Widget_NewTutorial_Quest:addColorAnimation(0, _alphaAnimTime, CppEnums.PAUI_ANIM_ADVANCE_TYPE.PAUI_ANIM_ADVANCE_COS_HALF_PI)
  alphaAni:SetStartColor(Defines.Color.C_00FFFFFF)
  alphaAni:SetEndColor(Defines.Color.C_FFFFFFFF)
  alphaAni.IsChangeChild = true
  local aniInfo2 = Panel_Widget_NewTutorial_Quest:addScaleAnimation(0, _alphaAnimTime, CppEnums.PAUI_ANIM_ADVANCE_TYPE.PAUI_ANIM_ADVANCE_COS_HALF_PI)
  aniInfo2:SetStartScale(0.2)
  aniInfo2:SetEndScale(1)
  aniInfo2.AxisX = Panel_Widget_NewTutorial_Quest:GetSizeX() / 2
  aniInfo2.AxisY = Panel_Widget_NewTutorial_Quest:GetSizeY() / 2
  aniInfo2.ScaleType = 1
  aniInfo2.IsChangeChild = true
  Panel_Widget_NewTutorial_Quest:RegisterUpdateFunc("Panel_NewTutorial_Quest_UpdateFunc")
end
function Panel_NewTutorial_Quest_UpdateFunc(deltaTime)
  if false == _isStartTextAni then
    _textdeltaTime = _textdeltaTime + deltaTime
    if _textAnimationStartTime < _textdeltaTime and nil ~= _saveCurrentText and 0 ~= string.len(_saveCurrentText) then
      _isStartTextAni = true
      _textdeltaTime = 0
    end
  end
  if true == _isStartTextAni then
    local txt = string.sub(_saveCurrentText, 0, _drawCurrentIndex)
    local size = string.len(_saveCurrentText)
    PaGlobal_Production_Tutorial_Main._ui_Quest._quest_desc:SetText(txt)
    if size >= _drawCurrentIndex then
      _drawCurrentIndex = _drawCurrentIndex + 1
    else
      _isStartTextAni = false
      _saveCurrentText = nil
      _drawCurrentIndex = 1
      Panel_Widget_NewTutorial_Quest:ClearUpdateLuaFunc()
    end
  end
end
function PaGlobalFunc_NewTutorial_Quest_HideAni()
end
function PaGlobalFunc_NewTutorial_SkillGuide_ShowAni()
  Panel_Widget_NewTutorial_SkillGuide:ResetVertexAni()
  local alphaAni = Panel_Widget_NewTutorial_SkillGuide:addColorAnimation(0, _alphaAnimTime, CppEnums.PAUI_ANIM_ADVANCE_TYPE.PAUI_ANIM_ADVANCE_COS_HALF_PI)
  alphaAni:SetStartColor(Defines.Color.C_00FFFFFF)
  alphaAni:SetEndColor(Defines.Color.C_FFFFFFFF)
  alphaAni.IsChangeChild = true
end
function PaGlobalFunc_NewTutorial_SkillGuide_HideAni()
end
function PaGlobalFunc_NewTutorial_Key_ShowAni()
  Panel_Widget_NewTutorial_Key:ResetVertexAni()
  local alphaAni = Panel_Widget_NewTutorial_Key:addColorAnimation(0, _alphaAnimTime, CppEnums.PAUI_ANIM_ADVANCE_TYPE.PAUI_ANIM_ADVANCE_COS_HALF_PI)
  alphaAni:SetStartColor(Defines.Color.C_00FFFFFF)
  alphaAni:SetEndColor(Defines.Color.C_FFFFFFFF)
  alphaAni.IsChangeChild = true
end
function PaGlobalFunc_NewTutorial_Key_HideAni()
end
function PaGlobal_Production_Tutorial_Main:buttonToggle(key, isOn)
  local aUI = self._ui_Key1[key]
  local aUI2 = self._ui_Key2[key]
  if self._keyIsShow[key] == "off" then
    aUI:SetShow(false)
    aUI2:SetShow(false)
    return
  end
  if false == isOn then
    aUI:SetShow(true)
    aUI2:SetShow(false)
    if self._keyIsUpdate[key] ~= "off" then
      self._keyIsUpdate[key] = "off"
    end
  elseif true == isOn and keyCustom_IsPressed_Action(self._keyToVirtualKey[key]) then
    aUI:SetShow(false)
    aUI2:SetShow(true)
    if self._keyIsUpdate[key] ~= "click" then
      self._keyIsUpdate[key] = "click"
      aUI:SetAlpha(0)
      aUI2:SetAlpha(1)
    end
  else
    aUI:SetShow(true)
    if self._keyIsUpdate[key] ~= "on" then
      self._keyIsUpdate[key] = "on"
      aUI:SetShow(true)
      aUI:SetAlpha(1)
      aUI2:SetAlpha(0)
    end
  end
end
function PaGlobal_Production_Tutorial_Main:updateUiOnOff()
  if nil ~= self._currentQuestGroup and nil ~= self._currentQuestNo and self._currentTutorialStep ~= self._currentQuestNo then
    self._currentTutorialStep = self._currentQuestNo
    self._isChangeTutorialStep = true
  end
  self:hideUiAll()
  if self._currentTutorialStep > 0 then
    if self._currentTutorialStep >= 1 then
      self._keyIsShow._button_W = "on"
      self._keyIsShow._button_R = "on"
      self._keyIsShow._button_A = "on"
      self._keyIsShow._button_S = "on"
      self._keyIsShow._button_D = "on"
      self._keyIsShow._m0 = "on"
      self._keyIsShow._m1 = "on"
      self._ui_Key1._mBody:SetShow(true)
      self._ui_Quest._quest_main:SetShow(true)
      self._ui_Quest._quest_desc:SetShow(true)
      self._ui_SkillGuide._Step1:SetShow(true)
      self._ui_SkillGuide._Step1_MoveForward:SetShow(true)
    end
    if self._currentTutorialStep >= 2 then
      self._delayNextSkillGuideCheckTime = 3
      self._accNextDeltaTime = 0
      self._ui_SkillGuide._Step1_MoveForward:SetShow(false)
      self._ui_SkillGuide._Step1_Move:SetShow(true)
    end
    if self._currentTutorialStep >= 3 then
    end
    if self._currentTutorialStep >= 4 then
      self._keyIsShow._button_Space = "on"
      self._ui_SkillGuide._Step1:SetShow(false)
      self._ui_SkillGuide._Step2:SetShow(true)
      self._ui_SkillGuide._Step2_1:SetShow(true)
    end
    if self._currentTutorialStep >= 5 then
      self._keyIsShow._button_Q = "on"
      self._keyIsShow._button_E = "on"
      self._keyIsShow._button_F = "on"
      self._keyIsShow._button_Space = "on"
      self._ui_SkillGuide._Step1:SetShow(false)
      self._ui_SkillGuide._Step2:SetShow(false)
      self._ui_SkillGuide._Step2_1:SetShow(false)
      self._ui_SkillGuide._Step2_2:SetShow(false)
      self._ui_SkillGuide._Step2_3:SetShow(false)
      self._ui_SkillGuide._Step3:SetShow(true)
      self._ui_SkillGuide._Step3_1:SetShow(true)
    end
    if self._currentTutorialStep >= 6 then
      self._keyIsShow._button_C = "on"
      self._keyIsShow._button_Tab = "on"
      self._ui_SkillGuide._Step1:SetShow(true)
      self._ui_SkillGuide._Step1_MoveForward:SetShow(false)
      self._ui_SkillGuide._Step1_Move:SetShow(true)
      self._ui_SkillGuide._Step1_Sprint:SetShow(false)
      self._ui_SkillGuide._Step1_Interaction:SetShow(true)
      self._ui_SkillGuide._Step2:SetShow(false)
      self._ui_SkillGuide._Step2_1:SetShow(false)
      self._ui_SkillGuide._Step2_2:SetShow(false)
      self._ui_SkillGuide._Step2_3:SetShow(false)
      self._ui_SkillGuide._Step3:SetShow(false)
      self._ui_SkillGuide._Step3_1:SetShow(false)
      self._ui_SkillGuide._Step3_2:SetShow(false)
      self._ui_SkillGuide._Step3_3:SetShow(false)
    end
    if self._currentTutorialStep >= 7 then
      self._keyIsShow._button_Shift = "on"
      self._ui_SkillGuide._Step1:SetShow(true)
      self._ui_SkillGuide._Step1_MoveForward:SetShow(false)
      self._ui_SkillGuide._Step1_Move:SetShow(true)
      self._ui_SkillGuide._Step1_Sprint:SetShow(false)
      self._ui_SkillGuide._Step1_Interaction:SetShow(false)
    end
    local questInfo = ToClient_GetQuestInfo(self._currentQuestGroup, self._currentQuestNo)
    if nil ~= questInfo then
      local questDemandWrapper = questInfo:getDemandAt(0)
      if nil ~= questDemandWrapper then
        self._ui_Quest._quest_desc:SetText("")
        _saveCurrentText = questDemandWrapper._desc
      end
    end
  else
    self:hideUiAll()
  end
end
function PaGlobal_Production_Tutorial_Main:updateSkillGuide(deltaTime)
  if 0 < self._skillGuideIndex then
    self._accDeltaTime = self._accDeltaTime + deltaTime
    if self._delaySkillGuideCheckTime <= self._accDeltaTime then
      if 1 == self._skillGuideIndex then
        self._keyIsShow._button_Shift = "on"
        self._ui_SkillGuide._Step1_Move:SetShow(false)
        self._ui_SkillGuide._Step1_Sprint:SetShow(true)
      elseif 3 == self._skillGuideIndex then
        self._ui_SkillGuide._Step1_Sprint:SetShow(false)
        self:hideAndShowAnimation(self._ui_SkillGuide._Step2_1, self._ui_SkillGuide._Step2_2)
      elseif 4 == self._skillGuideIndex then
        self:hideAndShowAnimation(self._ui_SkillGuide._Step2_2, self._ui_SkillGuide._Step2_3)
      elseif 5 == self._skillGuideIndex then
        self:hideAndShowAnimation(self._ui_SkillGuide._Step2_3, self._ui_SkillGuide._Step2_1)
      elseif 6 == self._skillGuideIndex then
        self:hideAndShowAnimation(self._ui_SkillGuide._Step3_1, self._ui_SkillGuide._Step3_2)
      elseif 7 == self._skillGuideIndex then
        self:hideAndShowAnimation(self._ui_SkillGuide._Step3_2, self._ui_SkillGuide._Step3_3)
      elseif 8 == self._skillGuideIndex then
        self:hideAndShowAnimation(self._ui_SkillGuide._Step3_3, self._ui_SkillGuide._Step3_1)
      end
      self._delaySkillGuideCheckTime = 0
      self._skillGuideIndex = 0
      self._accDeltaTime = 0
      self._delayNextSkillGuideCheckTime = 0.5
      self._accNextDeltaTime = 0
    end
    return
  end
  if 0 < self._delayNextSkillGuideCheckTime then
    self._accNextDeltaTime = self._accNextDeltaTime + deltaTime
    if self._delayNextSkillGuideCheckTime <= self._accNextDeltaTime then
      self._delayNextSkillGuideCheckTime = 0
      self._accNextDeltaTime = 0
    else
      return
    end
  end
  if true == self._ui_SkillGuide._Step1:GetShow() and true == self._isChangeTutorialStep and 2 == self._currentTutorialStep and true == keyCustom_IsPressed_Action(self._keyToVirtualKey._button_W) then
    self._isChangeTutorialStep = false
    self._delaySkillGuideCheckTime = 10
    self._skillGuideIndex = 1
  end
  if true == self._ui_SkillGuide._Step2:GetShow() then
    if true == self._ui_SkillGuide._Step2_1:GetShow() then
      if true == keyCustom_IsPressed_Action(self._keyToVirtualKey._m0) and false == keyCustom_IsPressed_Action(self._keyToVirtualKey._button_W) and false == keyCustom_IsPressed_Action(self._keyToVirtualKey._button_A) and false == keyCustom_IsPressed_Action(self._keyToVirtualKey._button_D) then
        self._delaySkillGuideCheckTime = 4
        self._skillGuideIndex = 3
      end
    elseif true == self._ui_SkillGuide._Step2_2:GetShow() then
      if keyCustom_IsPressed_Action(self._keyToVirtualKey._button_W) and keyCustom_IsPressed_Action(self._keyToVirtualKey._m0) then
        self._delaySkillGuideCheckTime = 2.5
        self._skillGuideIndex = 4
      end
    elseif true == self._ui_SkillGuide._Step2_3:GetShow() and (keyCustom_IsPressed_Action(self._keyToVirtualKey._button_A) or keyCustom_IsPressed_Action(self._keyToVirtualKey._button_D)) and keyCustom_IsPressed_Action(self._keyToVirtualKey._m1) then
      self._delaySkillGuideCheckTime = 2.5
      self._skillGuideIndex = 5
    end
  elseif true == self._ui_SkillGuide._Step3:GetShow() then
    if true == self._ui_SkillGuide._Step3_1:GetShow() then
      if keyCustom_IsPressed_Action(self._keyToVirtualKey._button_S) and keyCustom_IsPressed_Action(self._keyToVirtualKey._m1) then
        self._delaySkillGuideCheckTime = 2
        self._skillGuideIndex = 6
      end
    elseif true == self._ui_SkillGuide._Step3_2:GetShow() then
      if keyCustom_IsPressed_Action(self._keyToVirtualKey._m0) and keyCustom_IsPressed_Action(self._keyToVirtualKey._m1) then
        self._delaySkillGuideCheckTime = 1.5
        self._skillGuideIndex = 7
      end
    elseif true == self._ui_SkillGuide._Step3_3:GetShow() and keyCustom_IsPressed_Action(self._keyToVirtualKey._button_Shift) and keyCustom_IsPressed_Action(self._keyToVirtualKey._button_F) then
      self._delaySkillGuideCheckTime = 1.5
      self._skillGuideIndex = 8
    end
  end
end
function PaGlobal_Production_Tutorial_Main:hideAndShowAnimation(hidePanel, ShowPanel)
  if nil == hidePanel or nil == ShowPanel then
    return
  end
  local alphaAni = UIAni.AlphaAnimation(0, hidePanel, 0, 0.5)
  alphaAni:SetHideAtEnd(true)
  local panelSizeX = ShowPanel:GetSizeX()
  local panelPosX = ShowPanel:GetPosX()
  local panelPosY = ShowPanel:GetPosY()
  ShowPanel:SetPosX(panelPosX + panelSizeX)
  ShowPanel:SetAlphaChild(1)
  ShowPanel:SetAlphaExtraChild(1)
  ShowPanel:SetShow(true)
  local step = ShowPanel:addMoveAnimation(0, 0.5, CppEnums.PAUI_ANIM_ADVANCE_TYPE.PAUI_ANIM_ADVANCE_SIN_HALF_PI)
  step:SetStartPosition(panelPosX + panelSizeX, panelPosY)
  step:SetEndPosition(panelPosX, panelPosY)
  ShowPanel:CalcUIAniPos(step)
  ShowPanel:AddEffect("fUI_Tutorial_Command_01A", false, 0, 0)
end
function PaGlobal_Production_Tutorial_Main:hideUiAll()
  self._keyIsShow._button_Q = "off"
  self._keyIsShow._button_W = "off"
  self._keyIsShow._button_E = "off"
  self._keyIsShow._button_R = "off"
  self._keyIsShow._button_A = "off"
  self._keyIsShow._button_S = "off"
  self._keyIsShow._button_D = "off"
  self._keyIsShow._button_F = "off"
  self._keyIsShow._button_C = "off"
  self._keyIsShow._button_Tab = "off"
  self._keyIsShow._button_Shift = "off"
  self._keyIsShow._button_Space = "off"
  self._keyIsShow._m0 = "off"
  self._keyIsShow._m1 = "off"
  self._ui_Key1._button_Q:SetShow(false)
  self._ui_Key1._button_W:SetShow(false)
  self._ui_Key1._button_E:SetShow(false)
  self._ui_Key1._button_R:SetShow(false)
  self._ui_Key1._button_A:SetShow(false)
  self._ui_Key1._button_S:SetShow(false)
  self._ui_Key1._button_D:SetShow(false)
  self._ui_Key1._button_F:SetShow(false)
  self._ui_Key1._button_C:SetShow(false)
  self._ui_Key1._button_Tab:SetShow(false)
  self._ui_Key1._button_Shift:SetShow(false)
  self._ui_Key1._button_Space:SetShow(false)
  self._ui_Key1._m0:SetShow(false)
  self._ui_Key1._m1:SetShow(false)
  self._ui_Key1._mBody:SetShow(false)
  self._ui_Key1._buttonLock:SetShow(false)
  self._ui_Key1._m0_Lock:SetShow(false)
  self._ui_Key1._m1_Lock:SetShow(false)
  self._ui_Key2._button_Q:SetShow(false)
  self._ui_Key2._button_W:SetShow(false)
  self._ui_Key2._button_E:SetShow(false)
  self._ui_Key2._button_R:SetShow(false)
  self._ui_Key2._button_A:SetShow(false)
  self._ui_Key2._button_S:SetShow(false)
  self._ui_Key2._button_D:SetShow(false)
  self._ui_Key2._button_F:SetShow(false)
  self._ui_Key2._button_C:SetShow(false)
  self._ui_Key2._button_Tab:SetShow(false)
  self._ui_Key2._button_Shift:SetShow(false)
  self._ui_Key2._button_Space:SetShow(false)
  self._ui_Key2._m0:SetShow(false)
  self._ui_Key2._m1:SetShow(false)
  self._ui_Key2._mBody:SetShow(false)
  self._ui_Key2._buttonLock:SetShow(false)
  self._ui_Key2._m0_Lock:SetShow(false)
  self._ui_Key2._m1_Lock:SetShow(false)
  self._ui_Quest._quest_main:SetShow(false)
  self._ui_Quest._quest_desc:SetShow(false)
  self._ui_SkillGuide._Step1:SetShow(false)
  self._ui_SkillGuide._Step1_MoveForward:SetShow(false)
  self._ui_SkillGuide._Step1_Move:SetShow(false)
  self._ui_SkillGuide._Step1_Sprint:SetShow(false)
  self._ui_SkillGuide._Step1_Interaction:SetShow(false)
  self._ui_SkillGuide._Step2:SetShow(false)
  self._ui_SkillGuide._Step2_1:SetShow(false)
  self._ui_SkillGuide._Step2_2:SetShow(false)
  self._ui_SkillGuide._Step2_3:SetShow(false)
  self._ui_SkillGuide._Step3:SetShow(false)
  self._ui_SkillGuide._Step3_1:SetShow(false)
  self._ui_SkillGuide._Step3_2:SetShow(false)
  self._ui_SkillGuide._Step3_3:SetShow(false)
end
function Panel_NewTutorial_Key_UpdateFunc(deltaTime)
  Panel_NewTutorial_Key_ButtonToggleAll(true, deltaTime)
end
function Panel_NewTutorial_Key_ButtonToggleAll(isOn, deltaTime)
  if nil == PaGlobal_Production_Tutorial_Main then
    return
  end
  local self = PaGlobal_Production_Tutorial_Main
  if ToClient_getAutoMode() ~= CppEnums.Client_AutoControlStateType.BATTLE then
    for key, value in pairs(self._uvSet) do
      self:buttonToggle(key, isOn)
    end
  end
  self:updateSkillGuide(deltaTime)
end
registerEvent("FromClient_luaLoadComplete", "FromClient_Production_Tutorial_Main_Init")
function FromClient_Production_Tutorial_Main_Init()
  if nil == PaGlobal_Production_Tutorial_Main then
    return
  end
  PaGlobal_Production_Tutorial_Main:initialize()
end
function FromClient_enterProductionMode(isEnter)
  if nil == PaGlobal_Production_Tutorial_Main then
    return
  end
  local self = PaGlobal_Production_Tutorial_Main
  if true == isEnter then
    self._renderMode:set()
  else
    self._currentQuestGroup = nil
    self._currentQuestNo = nil
    self._currentTutorialStep = 0
    self._renderMode:reset()
    PaGlobal_Production_Tutorial_Main_Close()
  end
end
function FromClient_playReadyProduction()
  if false == _ContentsGroup_Production then
    return
  end
  if false == ToClient_isProductionMode() then
    return
  end
  local dialogAll = nil ~= Panel_Npc_Dialog_All
  local getShow = Panel_Npc_Dialog_All:GetShow()
  local isContact = PaGlobalFunc_DialogList_All_IsContactTalk()
  if true == dialogAll and true == getShow or true == isContact then
    PaGlobalFunc_DialogMain_All_Close()
  end
  local self = PaGlobal_Production_Tutorial_Main
  self._renderMode:set()
  SetUIMode(Defines.UIMode.eUIMode_Default)
end
function FromClient_acceptProductionQuest(questNo)
  if nil == PaGlobal_Production_Tutorial_Main then
    return
  end
  local self = PaGlobal_Production_Tutorial_Main
  self._currentQuestGroup = questNo._group
  self._currentQuestNo = questNo._quest
  self:updateUiOnOff()
  if true == _lateUpdateQuestDesc then
    Panel_Widget_NewTutorial_Quest:RegisterUpdateFunc("Panel_NewTutorial_Quest_UpdateFunc")
    _lateUpdateQuestDesc = false
  end
end
function FromClient_luaLoadCompleteLateUpdate()
  if nil == PaGlobal_Production_Tutorial_Main then
    return
  end
  local self = PaGlobal_Production_Tutorial_Main
  if true == ToClient_isProductionMode() then
    self._renderMode:set()
    PaGlobal_Production_Tutorial_Main_Open()
    local currentQuestNo = ToClient_getCurrentProductionQuestNo()
    self._currentQuestGroup = currentQuestNo._group
    self._currentQuestNo = currentQuestNo._quest
    self:updateUiOnOff()
  end
end
function PaGlobal_Production_Tutorial_Main_Open()
  if nil == PaGlobal_Production_Tutorial_Main then
    return
  end
  if false == ToClient_isProductionMode() then
    PaGlobal_Production_Tutorial_Main_Close()
  end
  if nil ~= Panel_Widget_NewTutorial_Key then
    Panel_Widget_NewTutorial_Key:RegisterUpdateFunc("Panel_NewTutorial_Key_UpdateFunc")
    if true == ToClient_isProductionMode() then
      Panel_Widget_NewTutorial_Key:SetShow(true, true)
    else
      Panel_Widget_NewTutorial_Key:SetShow(false)
    end
  end
  if nil ~= Panel_Widget_NewTutorial_Quest then
    if true == ToClient_isProductionMode() then
      Panel_Widget_NewTutorial_Quest:SetShow(true, true)
    else
      Panel_Widget_NewTutorial_Quest:SetShow(false)
    end
  end
  if nil ~= Panel_Widget_NewTutorial_SkillGuide then
    if true == ToClient_isProductionMode() then
      Panel_Widget_NewTutorial_SkillGuide:SetShow(true, true)
    else
      Panel_Widget_NewTutorial_SkillGuide:SetShow(false)
    end
  end
end
function PaGlobal_Production_Tutorial_Main_Close()
  if nil == PaGlobal_Production_Tutorial_Main then
    return
  end
  if nil ~= Panel_Widget_NewTutorial_Key then
    Panel_Widget_NewTutorial_Key:ClearUpdateLuaFunc()
    Panel_Widget_NewTutorial_Key:SetShow(false)
  end
  if nil ~= Panel_Widget_NewTutorial_Quest then
    Panel_Widget_NewTutorial_Quest:SetShow(false)
    Panel_Widget_NewTutorial_Quest:ClearUpdateLuaFunc()
  end
  if nil ~= Panel_Widget_NewTutorial_SkillGuide then
    Panel_Widget_NewTutorial_SkillGuide:SetShow(false)
  end
end
function PaGlobal_Production_Tutorial_Main_ReSizePanel()
  if nil == PaGlobal_Production_Tutorial_Main then
    return
  end
  Panel_Widget_NewTutorial_Key:ComputePos()
  Panel_Widget_NewTutorial_Quest:ComputePos()
  Panel_Widget_NewTutorial_SkillGuide:ComputePos()
end
function TutorialEffectPlay()
  if nil == PaGlobal_Production_Tutorial_Main then
    return
  end
  local self = PaGlobal_Production_Tutorial_Main
  PaGlobal_Production_Tutorial_Main_Open()
  self._ui_SkillGuide._Step2:SetShow(true)
  self._ui_SkillGuide._Step2_1:SetShow(true)
  self._ui_SkillGuide._Step2_2:SetShow(true)
  if 0 == self._toggleEffectTest then
    self:hideAndShowAnimation(self._ui_SkillGuide._Step2_1, self._ui_SkillGuide._Step2_2)
    self._toggleEffectTest = 1
  else
    self:hideAndShowAnimation(self._ui_SkillGuide._Step2_2, self._ui_SkillGuide._Step2_1)
    self._toggleEffectTest = 0
  end
end
